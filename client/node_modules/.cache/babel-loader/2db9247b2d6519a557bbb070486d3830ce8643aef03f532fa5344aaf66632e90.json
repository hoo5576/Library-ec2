{"ast":null,"code":"import React,{useEffect,useState}from'react';import{NavLink}from'react-router-dom';import axios from'axios';import{API_URL}from'../../config/contansts';import'./Event.scss';import Pagination from'../../components/Pagination/Pagination.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Event=()=>{const[events,setEvents]=useState([]);//받아온 이벤트 데이터들\nconst[endEvent_id,setEndEvent_id]=useState(0);//DB 다음 데이터 조회할때 어디서부터 읽을지 기준 값\nconst[startEvent_id,setStartEvent_id]=useState(0);//DB 이전 데이터 조회할때 어디서부터 읽을지 기준 값\nconst[data_limit,setData_limit]=useState(4);//DB조회할때 몇개 읽어 올지 값\nconst[limit,setLimit]=useState(2);//한페이지에 몇개 보여줄지 값\nconst[page,setPage]=useState(1);//현재 페이지\nconst[lastPage,setLastPage]=useState();//마지막 페이지인지 bool값(다음 버튼 표시용)\nconst offset=(page-1)*limit;// 데이터 시작 번호\nconst getEvents=async PreviousOrNext=>{const endPoint=PreviousOrNext&&PreviousOrNext=='DESC'?\"?event_id=\".concat(startEvent_id,\"&event_limit=\").concat(data_limit,\"&orderBy=DESC\"):\"?event_id=\".concat(endEvent_id,\"&event_limit=\").concat(data_limit,\"&orderBy=ASC\");const res=await axios.get(\"\".concat(API_URL,\"/api/event/page\").concat(endPoint));console.log(\"불러온 이벤트: \",res.data);console.log(\"불러온 이벤트 개수: \",res.data.result.length);// console.log(res.data[res.data.length-1].event_id);\nif(res.data.result.length>0){setEvents(res.data.result);setEndEvent_id(res.data.result[res.data.result.length-1].event_id);setStartEvent_id(res.data.result[0].event_id);setLastPage(res.data.lastPage);}};useEffect(()=>{getEvents();},[]);// const currentPageEvents = \nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"event-container-kjh\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uC774\\uBCA4\\uD2B8 \\uD398\\uC774\\uC9C0\"}),/*#__PURE__*/_jsx(\"div\",{className:\"event-content-kjh\",children:events.slice(offset,offset+limit).map((event,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"event-kjh\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(NavLink,{to:'/event/'+event.event_id,className:\"event-img-button-kjh\",children:/*#__PURE__*/_jsx(\"img\",{src:API_URL+event.event_img_url,alt:\"\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(NavLink,{to:'/event/'+event.event_id,children:/*#__PURE__*/_jsx(\"h3\",{children:event.event_title},index)}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-date-kjh\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-date-content-kjh\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uAE30\\uAC04:\\xA0\"}),/*#__PURE__*/_jsxs(\"p\",{children:[event.event_start_date,event.event_end_date&&' ~ '+event.event_end_date]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-date-content-kjh\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uBAA8\\uC9D1\\uC815\\uC6D0:\\xA0\"}),/*#__PURE__*/_jsxs(\"p\",{children:[event.event_max_applicants,\"\\uBA85\"]})]}),event.event_status==\"expired\"?/*#__PURE__*/_jsx(\"div\",{className:\"event-status-kjh false\",children:\"\\uB9C8\\uAC10\"}):/*#__PURE__*/_jsx(\"div\",{className:\"event-status-kjh true\",children:\"\\uBAA8\\uC9D1\\uC911\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"read-count-kjh\",children:[\"\\uC870\\uD68C\\uC218: \",event.read_count]})]},index))}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Pagination,{total:events.length,limit:limit,page:page,setPage:setPage,getData:getEvents,lastPage:lastPage,data_limit:data_limit})})]});};export default Event;","map":{"version":3,"names":["React","useEffect","useState","NavLink","axios","API_URL","Pagination","jsx","_jsx","jsxs","_jsxs","Event","events","setEvents","endEvent_id","setEndEvent_id","startEvent_id","setStartEvent_id","data_limit","setData_limit","limit","setLimit","page","setPage","lastPage","setLastPage","offset","getEvents","PreviousOrNext","endPoint","concat","res","get","console","log","data","result","length","event_id","className","children","slice","map","event","index","to","src","event_img_url","alt","event_title","event_start_date","event_end_date","event_max_applicants","event_status","read_count","total","getData"],"sources":["C:/Users/user/Desktop/Library-ec2/client/src/pages/Event/Event.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { API_URL } from '../../config/contansts';\r\nimport './Event.scss';\r\nimport Pagination from '../../components/Pagination/Pagination.js';\r\n\r\nconst Event = () => {\r\n\r\n  const [events, setEvents] = useState([]); //받아온 이벤트 데이터들\r\n  const [endEvent_id, setEndEvent_id] = useState(0); //DB 다음 데이터 조회할때 어디서부터 읽을지 기준 값\r\n  const [startEvent_id, setStartEvent_id] = useState(0); //DB 이전 데이터 조회할때 어디서부터 읽을지 기준 값\r\n  const [data_limit, setData_limit] = useState(4); //DB조회할때 몇개 읽어 올지 값\r\n  const [limit, setLimit] = useState(2); //한페이지에 몇개 보여줄지 값\r\n  const [page, setPage] = useState(1); //현재 페이지\r\n  const [lastPage, setLastPage] = useState(); //마지막 페이지인지 bool값(다음 버튼 표시용)\r\n  const offset = (page - 1) * limit; // 데이터 시작 번호\r\n\r\n  const getEvents = async (PreviousOrNext) => {\r\n    const endPoint = \r\n      PreviousOrNext && PreviousOrNext=='DESC' ? \r\n          `?event_id=${startEvent_id}&event_limit=${data_limit}&orderBy=DESC` \r\n        : \r\n          `?event_id=${endEvent_id}&event_limit=${data_limit}&orderBy=ASC`\r\n      ;\r\n\r\n    const res = await axios.get(`${API_URL}/api/event/page${endPoint}`);\r\n    console.log(\"불러온 이벤트: \", res.data);\r\n    console.log(\"불러온 이벤트 개수: \", res.data.result.length);\r\n    // console.log(res.data[res.data.length-1].event_id);\r\n    \r\n    if(res.data.result.length > 0) {\r\n      setEvents(res.data.result);\r\n      setEndEvent_id(res.data.result[res.data.result.length-1].event_id); \r\n      setStartEvent_id(res.data.result[0].event_id); \r\n      setLastPage(res.data.lastPage);\r\n    }\r\n    \r\n  }\r\n\r\n  useEffect(()=> {\r\n    getEvents();\r\n  },[]);\r\n\r\n\r\n  // const currentPageEvents = \r\n\r\n  return (\r\n    <div className='event-container-kjh'>\r\n      <h1>이벤트 페이지</h1>\r\n      <div className='event-content-kjh'>\r\n        {events.slice(offset, offset + limit).map((event, index) => (\r\n          <div key={index} className='event-kjh'>\r\n            <div>\r\n              <NavLink to={'/event/'+event.event_id} className='event-img-button-kjh'>\r\n                <img src={API_URL + event.event_img_url} alt=\"\" />\r\n              </NavLink>\r\n            </div>\r\n            <div>\r\n              <NavLink to={'/event/'+event.event_id}>\r\n                <h3 key={index}>{event.event_title}</h3>\r\n              </NavLink>\r\n              <div className='event-date-kjh'>\r\n                <div className='event-date-content-kjh'>\r\n                  <span>기간:&nbsp;</span>\r\n                  <p>{event.event_start_date}{event.event_end_date && ' ~ '+event.event_end_date}</p>\r\n                </div>\r\n                <div className='event-date-content-kjh'>\r\n                  <span>모집정원:&nbsp;</span>\r\n                  <p>{event.event_max_applicants}명</p>\r\n                </div>\r\n                {/* <p>상태: {event.event_status}</p> */}\r\n                {event.event_status == \"expired\" ? <div className='event-status-kjh false'>마감</div> : <div className='event-status-kjh true'>모집중</div>}\r\n              </div>\r\n            </div>\r\n            <p className='read-count-kjh'>조회수: {event.read_count}</p>\r\n          </div>\r\n        ))} \r\n      </div>\r\n      <div>\r\n        <Pagination \r\n          total={events.length}\r\n          limit={limit}\r\n          page={page}\r\n          setPage={setPage}\r\n          getData={getEvents}\r\n          lastPage={lastPage}\r\n          data_limit={data_limit}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Event;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}