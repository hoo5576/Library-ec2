{"ast":null,"code":"// React에서 useState 및 useEffect를 가져옵니다\nimport React,{useEffect,useState}from'react';import{NavLink,useLocation}from'react-router-dom';import'slick-carousel/slick/slick.css';import'slick-carousel/slick/slick-theme.css';import{Box,Pagination}from'@mui/material';import'./BookList.scss';import axios from'axios';import{API_URL}from'../../../config/contansts';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const BookList=()=>{const{search}=useLocation();const[showWelcome,setShowWelcome]=useState(false);const[currentPage,setCurrentPage]=useState(1);const itemsPerPage=5;// const [genre, setGenre] = useState(decodeURI(search.split('=')[1]));\nconst[books,setBooks]=useState([]);// console.log(\"url: \", genre);\nconsole.log(\"url: \",search);useEffect(()=>{const timeout=setTimeout(()=>{setShowWelcome(true);},500);window.scrollTo(0,0);return()=>clearTimeout(timeout);},[]);useEffect(()=>{const genre=decodeURI(search.split('=')[1]);// 데이터베이스에서 도서 목록을 가져오는 로직\naxios.get(\"\".concat(API_URL,\"/api/book?book_genre=\").concat(genre)).then(res=>{setBooks(res.data);console.log(\"관련 도서:\",res.data);}).catch(err=>{console.error(err);});},[search]);// 현재 페이지에 표시할 데이터 계산\nconst indexOfLastItem=currentPage*itemsPerPage;const indexOfFirstItem=indexOfLastItem-itemsPerPage;// 페이지 변경 함수\nconst handlePageChange=(event,pageNumber)=>{setCurrentPage(pageNumber);};return/*#__PURE__*/_jsx(\"div\",{className:\"BookList-container-lhs \".concat(showWelcome?'show':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"BookList-content-lhs \".concat(showWelcome?'show':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"BookList-SF-welcome-lhs \".concat(showWelcome?'visible':'')}),/*#__PURE__*/_jsxs(\"div\",{className:\"BookList-content-lhs\",children:[/*#__PURE__*/_jsx(\"h2\",{children:search.split('=')[1]===undefined?\"도서\":decodeURI(search.split('=')[1])}),/*#__PURE__*/_jsxs(\"div\",{className:\"BookList-main-content-lhs  \".concat(showWelcome?'show':''),children:[/*#__PURE__*/_jsx(\"div\",{className:\"BookList-main-img-lhs\",children:books.slice(indexOfFirstItem,indexOfLastItem).map((item,index)=>{return/*#__PURE__*/_jsx(NavLink,{to:\"/BookDetail/\".concat(item.book_id),className:\"grid-item-lhs \".concat(item.book_availability==='대출 가능'?'available':'unavailable'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid-item-info-lhs\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"book-image-lhs\",children:/*#__PURE__*/_jsx(\"img\",{src:API_URL+item.book_img_url,alt:\"grid\".concat(index+1)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-details-lhs\",children:[item.book_availability==1?/*#__PURE__*/_jsx(\"div\",{className:\"book-detail-availability-lhs\",style:{backgroundColor:\"blue\"},children:/*#__PURE__*/_jsx(\"span\",{children:\" \\uB300\\uCD9C \\uAC00\\uB2A5 \"})}):/*#__PURE__*/_jsx(\"div\",{className:\"book-detail-availability-lhs\",style:{backgroundColor:\"red\"},children:/*#__PURE__*/_jsx(\"span\",{children:\" \\uB300\\uCD9C \\uBD88\\uAC00 \"})}),/*#__PURE__*/_jsx(\"h3\",{children:item.book_name}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uC800\\uC790:\"}),\" \",item.book_author]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uCD9C\\uD310\\uC0AC:\"}),\" \",item.book_publisher]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uCD9C\\uD310\\uC77C:\"}),\" \",item.created_at]}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-rating-lhs\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"book-rating-name\",children:\"\\uD3C9\\uC810:\"}),item.average_rating?Array.from({length:item.average_rating},(_,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"star-icon\",children:\"\\u2605\"},index)):/*#__PURE__*/_jsx(\"span\",{className:\"book-rating-name\",children:\"\\uD3C9\\uC810 \\uC5C6\\uC74C\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"book-description-lhs\",children:item.book_description})]})]})},index);})}),/*#__PURE__*/_jsx(\"div\",{className:\"pagination-container-lhs\",style:{margin:\"0 auto\"},children:/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Pagination,{count:Math.ceil(books.length/itemsPerPage),page:currentPage,onChange:handlePageChange,variant:\"outlined\",shape:\"rounded\"})})})]})]})]})});};export default BookList;","map":{"version":3,"names":["React","useEffect","useState","NavLink","useLocation","Box","Pagination","axios","API_URL","jsx","_jsx","jsxs","_jsxs","BookList","search","showWelcome","setShowWelcome","currentPage","setCurrentPage","itemsPerPage","books","setBooks","console","log","timeout","setTimeout","window","scrollTo","clearTimeout","genre","decodeURI","split","get","concat","then","res","data","catch","err","error","indexOfLastItem","indexOfFirstItem","handlePageChange","event","pageNumber","className","children","undefined","slice","map","item","index","to","book_id","book_availability","src","book_img_url","alt","style","backgroundColor","book_name","book_author","book_publisher","created_at","average_rating","Array","from","length","_","book_description","margin","display","justifyContent","alignItems","count","Math","ceil","page","onChange","variant","shape"],"sources":["C:/Users/user/Desktop/Library-ec2/client/src/pages/Book/BookList/BookList.js"],"sourcesContent":["// React에서 useState 및 useEffect를 가져옵니다\r\nimport React, { useEffect, useState } from 'react';\r\nimport { NavLink, useLocation } from 'react-router-dom';\r\nimport 'slick-carousel/slick/slick.css';\r\nimport 'slick-carousel/slick/slick-theme.css';\r\nimport { Box, Pagination } from '@mui/material';\r\nimport './BookList.scss';\r\nimport axios from 'axios';\r\nimport { API_URL } from '../../../config/contansts';\r\n\r\nconst BookList = () => {\r\n  const {search} = useLocation();\r\n  const [showWelcome, setShowWelcome] = useState(false);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 5;\r\n  // const [genre, setGenre] = useState(decodeURI(search.split('=')[1]));\r\n  const [books, setBooks] = useState([]);\r\n  // console.log(\"url: \", genre);\r\n  console.log(\"url: \", search);\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n      setShowWelcome(true);\r\n    }, 500);\r\n\r\n    window.scrollTo(0, 0);\r\n\r\n    return () => clearTimeout(timeout);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const genre = decodeURI(search.split('=')[1]);\r\n    // 데이터베이스에서 도서 목록을 가져오는 로직\r\n    axios.get(`${API_URL}/api/book?book_genre=${genre}`)\r\n      .then(res => {\r\n        setBooks(res.data);\r\n        console.log(\"관련 도서:\", res.data);\r\n      })\r\n      .catch(err => {\r\n        console.error(err);\r\n      });\r\n  }, [search]);\r\n\r\n  // 현재 페이지에 표시할 데이터 계산\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n\r\n  // 페이지 변경 함수\r\n  const handlePageChange = (event, pageNumber) => {\r\n    setCurrentPage(pageNumber);\r\n  };\r\n\r\n  return (\r\n    <div className={`BookList-container-lhs ${showWelcome ? 'show' : ''}`}>\r\n      <div className={`BookList-content-lhs ${showWelcome ? 'show' : ''}`}>\r\n        <div className={`BookList-SF-welcome-lhs ${showWelcome ? 'visible' : ''}`}></div>\r\n        <div className='BookList-content-lhs'>\r\n          <h2>{search.split('=')[1] === undefined ? \"도서\" : decodeURI(search.split('=')[1])}</h2>\r\n          <div className={`BookList-main-content-lhs  ${showWelcome ? 'show' : ''}`}>\r\n            <div className='BookList-main-img-lhs'>\r\n              {books.slice(indexOfFirstItem,indexOfLastItem).map((item, index) => {\r\n                return (\r\n                  <NavLink to={`/BookDetail/${item.book_id}`} key={index} className={`grid-item-lhs ${item.book_availability === '대출 가능' ? 'available' : 'unavailable'}`}>\r\n                    <div className='grid-item-info-lhs'>\r\n                      <div className='book-image-lhs'>\r\n                        <img src={API_URL + item.book_img_url} alt={`grid${index + 1}`} />\r\n                      </div>\r\n                      <div className='book-details-lhs'>\r\n                          {item.book_availability == 1? \r\n                            <div className='book-detail-availability-lhs' style={{backgroundColor: \"blue\"}}> \r\n                              <span> 대출 가능 </span>\r\n                            </div> \r\n                            : \r\n                            <div className='book-detail-availability-lhs' style={{backgroundColor: \"red\"}}> \r\n                              <span> 대출 불가 </span>\r\n                            </div> \r\n                          }\r\n                        <h3>{item.book_name}</h3>\r\n                        <p><span>저자:</span> {item.book_author}</p>\r\n                        <p><span>출판사:</span> {item.book_publisher}</p>\r\n                        <p><span>출판일:</span> {item.created_at}</p>\r\n                        <div className='book-rating-lhs'>\r\n                          <span className='book-rating-name'>평점:</span>\r\n                          {item.average_rating ? (\r\n                            Array.from({ length: item.average_rating }, (_, index) => (\r\n                              <span key={index} className=\"star-icon\">★</span>\r\n                            ))\r\n                          ) : (\r\n                            <span className='book-rating-name'>평점 없음</span>\r\n                          )}\r\n                        </div>\r\n                        <p className='book-description-lhs'>{item.book_description}</p>\r\n                      </div>\r\n                    </div>\r\n                  </NavLink>\r\n                );\r\n              })}\r\n            </div>\r\n            <div className=\"pagination-container-lhs\" style={{ margin: \"0 auto\" }}>\r\n              <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\r\n                <Pagination\r\n                  count={Math.ceil(books.length / itemsPerPage)}\r\n                  page={currentPage}\r\n                  onChange={handlePageChange}\r\n                  variant=\"outlined\"\r\n                  shape=\"rounded\"\r\n                />\r\n              </Box>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BookList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}