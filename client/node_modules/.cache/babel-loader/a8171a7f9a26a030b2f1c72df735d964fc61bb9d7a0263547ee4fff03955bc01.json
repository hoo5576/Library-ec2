{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Modal,Box,TextField,Button,FormControl,InputLabel,Select,MenuItem}from'@mui/material';import axios from'axios';import{API_URL}from\"../../config/contansts\";import{useRecoilState}from\"recoil\";import{loginState}from\"../../recoil/atoms/State\";import{errHandler}from'../../utils/globalFunction';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const FaqModal=_ref=>{let{isOpen,onClose,onSubmit,categories}=_ref;const[islogin,setIslogin]=useRecoilState(loginState);const[newPost,setNewPost]=useState({faq_password:'',faq_tags:'',faq_title:'',faq_content:'',faq_status:0,created_at:new Date().toISOString()});useEffect(()=>{if(isOpen){setNewPost({faq_password:'',faq_tags:'',faq_title:'',faq_content:'',faq_status:0,created_at:new Date().toISOString()});}},[isOpen]);const handleSubmit=async()=>{try{if(newPost.faq_tags&&newPost.faq_title&&newPost.faq_content){const faqData={faq_password:newPost.faq_password,faq_tags:newPost.faq_tags,faq_title:newPost.faq_title,faq_content:newPost.faq_content,faq_status:newPost.faq_status,created_at:newPost.created_at};const res=await axios.post(\"\".concat(API_URL,\"/api/faq\"),faqData);onSubmit(res.data);console.log(res.data);onClose();}else{alert('필수 입력.');}}catch(error){const{reLogin}=errHandler(error);if(reLogin===true){setIslogin(false);}}};return/*#__PURE__*/_jsx(Modal,{open:isOpen,onClose:onClose,children:/*#__PURE__*/_jsxs(Box,{sx:{position:'absolute',width:400,bgcolor:'background.paper',border:'2px solid #000',boxShadow:24,p:2,top:'50%',left:'50%',transform:'translate(-50%, -50%)'},children:[/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,sx:{mb:2},children:[/*#__PURE__*/_jsx(InputLabel,{children:\"\\uCE74\\uD14C\\uACE0\\uB9AC\"}),/*#__PURE__*/_jsx(Select,{value:newPost.faq_tags,onChange:e=>setNewPost({...newPost,faq_tags:e.target.value}),children:categories.filter(faq_tags=>faq_tags!=='전체').map(tags=>/*#__PURE__*/_jsx(MenuItem,{value:tags,children:tags},tags))})]}),/*#__PURE__*/_jsx(TextField,{label:\"\\uBE44\\uBC00\\uBC88\\uD638\",fullWidth:true,margin:\"normal\",value:newPost.faq_password,onChange:e=>setNewPost({...newPost,faq_password:e.target.value})}),/*#__PURE__*/_jsx(TextField,{label:\"\\uC81C\\uBAA9\",fullWidth:true,margin:\"normal\",value:newPost.faq_title,onChange:e=>setNewPost({...newPost,faq_title:e.target.value})}),/*#__PURE__*/_jsx(TextField,{label:\"\\uB0B4\\uC6A9\",fullWidth:true,multiline:true,rows:4,margin:\"normal\",value:newPost.faq_content,onChange:e=>setNewPost({...newPost,faq_content:e.target.value})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",style:{margin:\"auto\",display:\"block\",backgroundColor:'green'},onClick:handleSubmit,children:\"\\uAE00 \\uB4F1\\uB85D\"})]})});};export default FaqModal;","map":{"version":3,"names":["React","useEffect","useState","Modal","Box","TextField","Button","FormControl","InputLabel","Select","MenuItem","axios","API_URL","useRecoilState","loginState","errHandler","jsx","_jsx","jsxs","_jsxs","FaqModal","_ref","isOpen","onClose","onSubmit","categories","islogin","setIslogin","newPost","setNewPost","faq_password","faq_tags","faq_title","faq_content","faq_status","created_at","Date","toISOString","handleSubmit","faqData","res","post","concat","data","console","log","alert","error","reLogin","open","children","sx","position","width","bgcolor","border","boxShadow","p","top","left","transform","fullWidth","mb","value","onChange","e","target","filter","map","tags","label","margin","multiline","rows","variant","style","display","backgroundColor","onClick"],"sources":["C:/Users/user/Desktop/Library-ec2/client/src/pages/Faq/FaqModal.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Modal, Box, TextField, Button, FormControl, InputLabel, Select, MenuItem } from '@mui/material';\r\nimport axios from 'axios';\r\nimport { API_URL } from \"../../config/contansts\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { loginState } from \"../../recoil/atoms/State\";\r\nimport { errHandler } from '../../utils/globalFunction';\r\n\r\nconst FaqModal = ({ isOpen, onClose, onSubmit, categories }) => {\r\n  const [islogin, setIslogin] = useRecoilState(loginState);\r\n  const [newPost, setNewPost] = useState({\r\n    faq_password: '',\r\n    faq_tags: '',\r\n    faq_title: '',\r\n    faq_content: '',\r\n    faq_status: 0,\r\n    created_at: new Date().toISOString(),\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setNewPost({\r\n        faq_password: '',\r\n        faq_tags: '',\r\n        faq_title: '',\r\n        faq_content: '',\r\n        faq_status: 0,\r\n        created_at: new Date().toISOString(),\r\n      });\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      if (newPost.faq_tags && newPost.faq_title && newPost.faq_content) {\r\n        const faqData = {\r\n          faq_password: newPost.faq_password,\r\n          faq_tags: newPost.faq_tags,\r\n          faq_title: newPost.faq_title,\r\n          faq_content: newPost.faq_content,\r\n          faq_status: newPost.faq_status,\r\n          created_at: newPost.created_at,\r\n        };\r\n        const res = await axios.post(`${API_URL}/api/faq`, faqData);\r\n        onSubmit(res.data);\r\n        console.log(res.data);\r\n        onClose();\r\n      } else {\r\n        alert('필수 입력.');\r\n      }\r\n    } catch (error) {\r\n      const {reLogin} = errHandler(error);\r\n      if (reLogin === true) {\r\n        setIslogin(false);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal open={isOpen} onClose={onClose}>\r\n      <Box\r\n        sx={{\r\n          position: 'absolute',\r\n          width: 400,\r\n          bgcolor: 'background.paper',\r\n          border: '2px solid #000',\r\n          boxShadow: 24,\r\n          p: 2,\r\n          top: '50%',\r\n          left: '50%',\r\n          transform: 'translate(-50%, -50%)',\r\n        }}\r\n      >\r\n        <FormControl fullWidth sx={{ mb: 2 }}>\r\n          <InputLabel>카테고리</InputLabel>\r\n          <Select value={newPost.faq_tags} onChange={(e) => setNewPost({ ...newPost, faq_tags: e.target.value })}>\r\n            {categories.filter(faq_tags => faq_tags !== '전체')\r\n            .map((tags) => (\r\n              <MenuItem key={tags} value={tags}>\r\n                {tags}\r\n              </MenuItem>\r\n            ))}\r\n          </Select>\r\n        </FormControl>\r\n        <TextField\r\n          label=\"비밀번호\"\r\n          fullWidth\r\n          margin=\"normal\"\r\n          value={newPost.faq_password}\r\n          onChange={(e) => setNewPost({ ...newPost, faq_password: e.target.value })}\r\n        />\r\n        <TextField\r\n          label=\"제목\"\r\n          fullWidth\r\n          margin=\"normal\"\r\n          value={newPost.faq_title}\r\n          onChange={(e) => setNewPost({ ...newPost, faq_title: e.target.value })}\r\n        />\r\n        <TextField\r\n          label=\"내용\"\r\n          fullWidth\r\n          multiline\r\n          rows={4}\r\n          margin=\"normal\"\r\n          value={newPost.faq_content}\r\n          onChange={(e) => setNewPost({ ...newPost, faq_content: e.target.value })}\r\n        />\r\n        <Button variant=\"contained\" style={{ margin: \"auto\", display: \"block\", backgroundColor: 'green' }} onClick={handleSubmit}>\r\n          글 등록\r\n        </Button>\r\n      </Box>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default FaqModal;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}