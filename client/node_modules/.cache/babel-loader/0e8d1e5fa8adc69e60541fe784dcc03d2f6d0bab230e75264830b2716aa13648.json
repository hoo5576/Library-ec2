{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams,NavLink}from\"react-router-dom\";import axios from\"axios\";import{API_URL}from\"../../../config/contansts\";import'./EventDetail.scss';import{errHandler}from\"../../../utils/globalFunction\";import{useRecoilState}from\"recoil\";import{loginState}from\"../../../recoil/atoms/State\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const EventDetail=()=>{const[islogin,setIslogin]=useRecoilState(loginState);const[detailEvent,setDetailEvent]=useState(\"\");const{id}=useParams();console.log(id);useEffect(()=>{axios.get(\"\".concat(API_URL,\"/api/event/\").concat(id)).then(res=>{setDetailEvent(res.data);console.log(res.data);}).catch(e=>{console.error(e);});},[]);const handleEventApply=()=>{axios.post(\"\".concat(API_URL,\"/api/event/apply/\").concat(id)).then(res=>{console.log(res.data);alert(\"신청 성공\");}).catch(e=>{// console.error(e.response.data);\n// alert(e.response.data.message);\nconst{reLogin}=errHandler(e);if(reLogin===true){setIslogin(false);}});// console.log(\"result: \", result);\n// if(result.status == 201){\n//   alert(\"신청 성공\")\n// } else {\n//   alert(\"신청 실패\")\n// }\n};const handleEventunApply=()=>{axios.delete(\"\".concat(API_URL,\"/api/event/apply/\").concat(id)).then(res=>{console.log(res.data);alert(res.data.message);}).catch(e=>{const{reLogin}=errHandler(e);if(reLogin===true){setIslogin(false);}});// console.log(\"result: \", result);\n// if(result.status == 201){\n//   alert(\"신청 성공\")\n// } else {\n//   alert(\"신청 실패\")\n// }\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"eventDetail-container-kjh\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-kjh\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:API_URL+detailEvent.event_img_url,alt:\"\",className:\"event-img-button-kjh\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:detailEvent.event_title}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-date-kjh\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"event-date-content-kjh\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uAE30\\uAC04:\\xA0\"}),/*#__PURE__*/_jsxs(\"p\",{children:[detailEvent.event_start_date,detailEvent.event_end_date&&' ~ '+detailEvent.event_end_date]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-date-content-kjh\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uBAA8\\uC9D1\\uC815\\uC6D0:\\xA0\"}),/*#__PURE__*/_jsxs(\"p\",{children:[detailEvent.event_max_applicants,\"\\uBA85\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"event-date-content-kjh\",children:detailEvent.event_status==\"expired\"?/*#__PURE__*/_jsx(\"p\",{className:\"event-status-kjh false\",children:\"\\uB9C8\\uAC10\"}):/*#__PURE__*/_jsx(\"p\",{className:\"event-status-kjh true\",children:\"\\uBAA8\\uC9D1\\uC911\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"event-date-content-kjh\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"event-apply-kjh\",onClick:handleEventApply,children:\"\\uC2E0\\uCCAD\"}),/*#__PURE__*/_jsx(\"button\",{className:\"event-unapply-kjh\",onClick:handleEventunApply,children:\"\\uC2E0\\uCCAD\\uCDE8\\uC18C\"})]})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"read-count-kjh\",children:[\"\\uC870\\uD68C\\uC218: \",detailEvent.read_count]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"img-div-kjh\",children:/*#__PURE__*/_jsx(\"img\",{src:API_URL+detailEvent.event_img_url,alt:detailEvent.event_title,className:\"content-img-kjh\"})}),/*#__PURE__*/_jsx(NavLink,{to:\"/event\",className:\"button btnPush eventlist-button-kjh\",children:\"\\uBAA9\\uB85D\"})]});};export default EventDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","NavLink","axios","API_URL","errHandler","useRecoilState","loginState","jsx","_jsx","jsxs","_jsxs","EventDetail","islogin","setIslogin","detailEvent","setDetailEvent","id","console","log","get","concat","then","res","data","catch","e","error","handleEventApply","post","alert","reLogin","handleEventunApply","delete","message","className","children","src","event_img_url","alt","event_title","event_start_date","event_end_date","event_max_applicants","event_status","onClick","read_count","to"],"sources":["C:/Users/user/Desktop/Library-ec2/client/src/pages/Event/EventDetail/EventDetail.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, NavLink } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { API_URL } from \"../../../config/contansts\";\r\nimport './EventDetail.scss';\r\nimport { errHandler } from \"../../../utils/globalFunction\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { loginState } from \"../../../recoil/atoms/State\";\r\n\r\n\r\nconst EventDetail = () => {\r\n  const [islogin, setIslogin] = useRecoilState(loginState);\r\n  const [detailEvent, setDetailEvent] = useState(\"\");\r\n  const { id } = useParams();\r\n  console.log(id);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${API_URL}/api/event/${id}`)\r\n      .then((res) => {\r\n        setDetailEvent(res.data);\r\n        console.log(res.data);\r\n      })\r\n      .catch((e) => {\r\n        console.error(e);\r\n      });\r\n  }, []);\r\n\r\n  const handleEventApply =  () => {\r\n    axios.post(`${API_URL}/api/event/apply/${id}`)\r\n      .then(res => {\r\n        console.log(res.data);\r\n        alert(\"신청 성공\");\r\n      })\r\n      .catch(e => {    \r\n        // console.error(e.response.data);\r\n        // alert(e.response.data.message);\r\n\r\n        const {reLogin} = errHandler(e);\r\n        if (reLogin === true) {\r\n          setIslogin(false);\r\n        }\r\n      })\r\n    // console.log(\"result: \", result);\r\n    // if(result.status == 201){\r\n    //   alert(\"신청 성공\")\r\n    // } else {\r\n    //   alert(\"신청 실패\")\r\n    // }\r\n  }\r\n\r\n  const handleEventunApply =  () => {\r\n    axios.delete(`${API_URL}/api/event/apply/${id}`)\r\n      .then(res => {\r\n        console.log(res.data);\r\n        alert(res.data.message);\r\n      })\r\n      .catch(e => {    \r\n        const {reLogin} = errHandler(e);\r\n        if (reLogin === true) {\r\n          setIslogin(false);\r\n        }\r\n      })\r\n    // console.log(\"result: \", result);\r\n    // if(result.status == 201){\r\n    //   alert(\"신청 성공\")\r\n    // } else {\r\n    //   alert(\"신청 실패\")\r\n    // }\r\n  }\r\n\r\n  return (\r\n    <div className=\"eventDetail-container-kjh\">\r\n      <div className='event-kjh'>\r\n        <div>\r\n          <img src={API_URL+detailEvent.event_img_url} alt=\"\" className='event-img-button-kjh' />\r\n        </div>\r\n        <div>\r\n          <h3>{detailEvent.event_title}</h3>\r\n          <div className='event-date-kjh'>\r\n            <div className='event-date-content-kjh'>\r\n              <span>기간:&nbsp;</span>\r\n              <p>{detailEvent.event_start_date}{detailEvent.event_end_date && ' ~ '+detailEvent.event_end_date}</p>\r\n            </div>\r\n            <div className='event-date-content-kjh'>\r\n              <span>모집정원:&nbsp;</span>\r\n              <p>{detailEvent.event_max_applicants}명</p>\r\n            </div>\r\n            <div className='event-date-content-kjh'>\r\n              {/* <p>상태: {detailEvent.event_status}</p> */}\r\n              {detailEvent.event_status == \"expired\" ? <p className='event-status-kjh false'>마감</p> : <p className='event-status-kjh true'>모집중</p>}\r\n            </div>\r\n            <div className='event-date-content-kjh'>\r\n              <button className=\"event-apply-kjh\" onClick={handleEventApply}>신청</button>\r\n              <button className=\"event-unapply-kjh\" onClick={handleEventunApply}>신청취소</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <p className=\"read-count-kjh\">조회수: {detailEvent.read_count}</p>\r\n      </div>\r\n      <div className=\"img-div-kjh\">\r\n        <img src={API_URL+detailEvent.event_img_url} alt={detailEvent.event_title} className=\"content-img-kjh\" />\r\n      </div>\r\n        <NavLink to='/event' className='button btnPush eventlist-button-kjh'>목록</NavLink>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default EventDetail;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}