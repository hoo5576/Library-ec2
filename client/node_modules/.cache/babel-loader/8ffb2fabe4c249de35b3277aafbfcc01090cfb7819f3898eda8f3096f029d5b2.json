{"ast":null,"code":"import React,{useState}from'react';import{API_URL}from'../../../config/contansts';import{useNavigate}from'react-router-dom';import axios from'axios';import{errHandler}from\"../../../utils/globalFunction\";import{useRecoilState}from\"recoil\";import{loginState}from\"../../../recoil/atoms/State\";import'./Check.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Check=()=>{const navigate=useNavigate();const[islogin,setIslogin]=useRecoilState(loginState);//useState와 거의 비슷한 사용법\nconst[checkPwd,setCheckPwd]=useState(true);const onSubmitCheckPwd=async e=>{e.preventDefault();const pwd=e.target.pwd.value.trim();console.log(\"pwd:\",pwd);if(pwd!==\"\"){try{const res=await axios.post(\"\".concat(API_URL,\"/api/user/password-check\"),{pwd});console.log(\"res.status : \",res.data);if(res.data.status==true){navigate('/myedit');}else{setCheckPwd(false);}}catch(error){const{reLogin}=errHandler(error);if(reLogin===true){setIslogin(false);}}}};const handleClose=()=>{navigate(-1);};return/*#__PURE__*/_jsx(\"div\",{className:\"check-container-kjh\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmitCheckPwd,children:[/*#__PURE__*/_jsx(\"div\",{className:\"checkpageTop-kjh\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\uACC4\\uC815 \\uC815\\uBCF4 \\uD655\\uC778\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"checkMain-kjh\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),!checkPwd&&/*#__PURE__*/_jsx(\"span\",{style:{float:'right',color:'red'},children:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uBD88\\uC77C\\uCE58!\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"pwd\",placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"button\",{className:\"check_cancell-kjh\",type:\"button\",onClick:handleClose,children:\"\\uCDE8\\uC18C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"check_button-kjh\",type:\"submit\",children:\"\\uD655\\uC778\"})]})]})});};export default Check;","map":{"version":3,"names":["React","useState","API_URL","useNavigate","axios","errHandler","useRecoilState","loginState","jsx","_jsx","jsxs","_jsxs","Check","navigate","islogin","setIslogin","checkPwd","setCheckPwd","onSubmitCheckPwd","e","preventDefault","pwd","target","value","trim","console","log","res","post","concat","data","status","error","reLogin","handleClose","className","children","onSubmit","style","float","color","type","id","placeholder","onClick"],"sources":["C:/Users/user/Desktop/Library-ec2/client/src/pages/Mypage/Check/Check.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { API_URL } from '../../../config/contansts';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { errHandler } from \"../../../utils/globalFunction\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { loginState } from \"../../../recoil/atoms/State\";\r\nimport './Check.scss';\r\n\r\nconst Check = () => {\r\n  const navigate = useNavigate();\r\n  const [islogin, setIslogin] = useRecoilState(loginState); //useState와 거의 비슷한 사용법\r\n  const [ checkPwd, setCheckPwd ] = useState(true);\r\n\r\n  const onSubmitCheckPwd = async (e) => {\r\n    e.preventDefault();\r\n    const pwd = e.target.pwd.value.trim();\r\n\r\n    console.log(\"pwd:\", pwd);\r\n    if(pwd !== \"\"){ \r\n      try {\r\n        const res = await axios.post(`${API_URL}/api/user/password-check`, {pwd});\r\n        console.log(\"res.status : \", res.data);\r\n        if(res.data.status == true){\r\n          navigate('/myedit');\r\n        } else {\r\n          setCheckPwd(false);\r\n        }\r\n      } catch (error) {\r\n        const {reLogin} = errHandler(error);\r\n        if (reLogin === true) {\r\n          setIslogin(false);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  const handleClose = () => {\r\n    navigate(-1);\r\n  }\r\n\r\n  return (\r\n    <div className='check-container-kjh'>\r\n      <form onSubmit={onSubmitCheckPwd}>\r\n        <div className='checkpageTop-kjh'>\r\n          <h1>계정 정보 확인</h1>\r\n        </div>\r\n        \r\n        <div className='checkMain-kjh'>\r\n          <label>비밀번호</label>\r\n          {!checkPwd && <span style={{ float: 'right', color: 'red'}}>비밀번호 불일치!</span>}\r\n          <input\r\n            type=\"password\"\r\n            id=\"pwd\"\r\n            placeholder=\"비밀번호\"\r\n          />\r\n          <button className='check_cancell-kjh' type='button' onClick={handleClose}>취소</button>\r\n          <button className='check_button-kjh' type='submit'>확인</button>\r\n        </div>\r\n      </form>\r\n\r\n    </div>\r\n  )\r\n\r\n\r\n\r\n\r\n\r\n}\r\n\r\nexport default Check;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}